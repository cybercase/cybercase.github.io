<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>UP2 Reverse Engineering</title><meta name="description" content="Jawbone UP2 vibration hack"/><meta property="og:title" content="UP2 Reverse Engineering"/><meta name="og:description" content="Jawbone UP2 vibration hack"/><meta name="og:image" content="https://stefano.brilli.me/images/up2_band.png"/><meta property="og:url" content="https://stefano.brilli.me/blog/up2_reverse_engineering/"/><meta property="og:type" content="website"/><meta name="next-head-count" content="9"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://cdnjs.cloudflare.com"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.3/katex.min.css" integrity="sha512-07YhC3P4/vS5HdgGuNAAeIxb5ee//efgRNo5AGdMtqFBUPYOdQG/sDK0Nl5qNq94kdEk/Pvu8pmN4GYUeucUkw==" crossorigin="anonymous" referrerPolicy="no-referrer"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/23b632ecbbf88eb8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/23b632ecbbf88eb8.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-250a0b3dc1fc1f02.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08f9979ebc4e297a.js" defer=""></script><script src="/_next/static/chunks/1bfc9850-b964ecc8fc6be6a1.js" defer=""></script><script src="/_next/static/chunks/440-9ab67ee21eaa4db8.js" defer=""></script><script src="/_next/static/chunks/294-5a7641993238b3cf.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-8674bd6fffbba048.js" defer=""></script><script src="/_next/static/Pu0FF9jwbI92rgPmGqXW4/_buildManifest.js" defer=""></script><script src="/_next/static/Pu0FF9jwbI92rgPmGqXW4/_ssgManifest.js" defer=""></script><script src="/_next/static/Pu0FF9jwbI92rgPmGqXW4/_middlewareManifest.js" defer=""></script><style data-emotion="css "></style><style data-href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap">@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc6CsI.woff) format('woff')}@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntumono/v15/KFOjCneDtsqEr0keqCMhbCc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css?family=Roboto:400,100italic,100,300,900&display=swap">@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEzAdKQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxIIzQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEz0dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEzQdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEzwdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEzMdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEz8dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEz4dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOiCnqEu92Fr1Mu51QrEzAdL-vwnYg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxFIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxMIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxEIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxLIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxHIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxGIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOkCnqEu92Fr1MmgVxIIzIXKMny.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css?family=Merriweather:400,400i,700&display=swap">@font-face{font-family:'Merriweather';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4m0qyriQwlOrhSvowK_l5-eRZOf-Q.woff) format('woff')}@font-face{font-family:'Merriweather';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-fCZK.woff) format('woff')}@font-face{font-family:'Merriweather';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l52xwNZWMf8.woff) format('woff')}@font-face{font-family:'Merriweather';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4m0qyriQwlOrhSvowK_l5-eRZDf-LVrPHpBXw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Merriweather';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4m0qyriQwlOrhSvowK_l5-eRZKf-LVrPHpBXw.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Merriweather';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4m0qyriQwlOrhSvowK_l5-eRZBf-LVrPHpBXw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Merriweather';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4m0qyriQwlOrhSvowK_l5-eRZAf-LVrPHpBXw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Merriweather';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4m0qyriQwlOrhSvowK_l5-eRZOf-LVrPHp.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Merriweather';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-cSZMdeX3rsHo.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Merriweather';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-eCZMdeX3rsHo.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Merriweather';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-cyZMdeX3rsHo.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Merriweather';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-ciZMdeX3rsHo.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Merriweather';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-440qyriQwlOrhSvowK_l5-fCZMdeX3rg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Merriweather';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l52xwNZVcf6hPvhPUWH.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Merriweather';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l52xwNZXMf6hPvhPUWH.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Merriweather';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l52xwNZV8f6hPvhPUWH.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Merriweather';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l52xwNZVsf6hPvhPUWH.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Merriweather';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v30/u-4n0qyriQwlOrhSvowK_l52xwNZWMf6hPvhPQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><main class="container"><header class="site-header site-header--cover"><nav class="site-header-nav"><a href="/feed.rss" rel="alternate" type="application/rss+xml"><i class="fa fa-rss"></i></a><span></span><a href="/">Home</a><a href="/blog/">Blog</a></nav><div class="cover cover--dark" style="background-image:url(/images/up2_band.png)"><div class="cover-box"><h1 class="cover-box-title">UP2 Reverse Engineering</h1></div></div></header><article class="content blog-article" lang="en"><p><strong>July 2018 UPDATE:</strong> I’ve released the source code of this project on github.</br>
Find out more here: <a href="https://github.com/cybercase/up2_hacking">https://github.com/cybercase/up2_hacking</a></p>
<h3>Having fun with Jawbone UP2</h3>
<p>A few months after releasing <a href="../up24_notifications">UpNotifications for UP24</a>
I received a lot of emails asking to add support for the new <strong>Jawbone UP2</strong>.</p>
<p>As soon as Jawbone made the UP2 available outside the US I placed my order,
and after receiving the new band, without thinking too much I started tuning the UpNotifications
source code to include the UP2 among supported devices just to see if the same hack used for UP24 was working also on this band…</p>
<blockquote>
<p>Unfortunately, it was not.</p>
</blockquote>
<p>I didn’t give up, and following the same steps of my own <a href="../up24_reverse_engineering">UP24 Hacking</a> blogpost,
I opened Android Studio, turned on the debugger, started intercepting calls to the android BLE API and see what has changed with respect to UP24…</p>
<p>The bluetooth packets I was reading were completely different from the UP24 packets,
so I thought that maybe it was just a matter of replacing the old UP24’s pairing command with the new UP2’s one. And so I did.</p>
<p>I soon found out that the same trick of <em>sending a pairing command to make the band vibrate</em> was not working because
the new UP2 knows if it has been already paired with a phone, and in that case it does not vibrate on pairing.</p>
<p>While the UP24 <strong>allowed anyone</strong> to make vibrate your band without your permission just by sending a pairing command,
with the UP2 <strong>Jawbone has fixed this issue</strong>. Though this is a good news for all UP2 owners, this meant that I had to
find another way to trigger the vibration.</p>
<blockquote>
<p>I needed to go deeper.</p>
</blockquote>
<p>I struggled to understand how the communication protocol has changed, and see if I could find another command to exploit.
But just looking at the stream of bluetooth packets wasn’t enough…</p>
<p>so I though of disassembling the app and inspecting its <code>.smali</code> source code using <a href="http://ibotpeaches.github.io/Apktool/">apktool</a>
to search for anything that could be useful.</p>
<p>After going through the sources for a while I noticed a <code>log</code> method used all over the app, probably for debugging purposes,
that was disabled just by a simple flag check.</p>
<p>In a file called <code>JBLog.smali</code>, I changed the following lines</p>
<pre><code class="hljs language-diff"><span class="hljs-deletion">-    if-nez v0, :cond_0</span>
<span class="hljs-addition">+    if-eqz v0, :cond_0</span>
</code></pre>
<p>then reassembled the app and installed into my phone.</p>
<blockquote>
<p>I started getting a lot of debug information placed there right from UP developers :)</p>
</blockquote>
<p>I immediately found out that the communication protocol was much more sophisticated than the one used for UP24.</p>
<p>Log messages like this</p>
<pre><code class="hljs language-scss"><span class="hljs-number">8257</span>-<span class="hljs-number">8288</span>/com<span class="hljs-selector-class">.jawbone</span><span class="hljs-selector-class">.upopen</span> <span class="hljs-selector-tag">I</span>/UPOPEN﹕ StreamService >>> writeOutputStream > KeyExchangeRequest >
    f >> (<span class="hljs-number">0</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>x03
    g >> (<span class="hljs-number">1</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>x00
    h >> (<span class="hljs-number">2</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>xd3
    <span class="hljs-selector-tag">i</span> >> (<span class="hljs-number">3</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>x10
    d >> (<span class="hljs-number">4</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">7</span>FA19B1353FC584CAEF3D4214C74A365
</code></pre>
<p>and</p>
<pre><code class="hljs language-bash">8257-7505/com.jawbone.upopen D/SecuredStream﹕ generateSeed > 271372323671BDEE846276EF48B53F75
8257-7505/com.jawbone.upopen D/SecuredStream﹕ 8200CD05803A090000 xor D4CB772B8B9D389527 = 56CBBA2E0BA7319527
</code></pre>
<p>and</p>
<pre><code class="hljs language-scss"><span class="hljs-number">8257</span>-<span class="hljs-number">7505</span>/com<span class="hljs-selector-class">.jawbone</span><span class="hljs-selector-class">.upopen</span> <span class="hljs-selector-tag">I</span>/UPOPEN﹕ StreamService >>> writeOutputStream > SecureChannelRequest >
    f >> (<span class="hljs-number">0</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>x06
    g >> (<span class="hljs-number">1</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>x00
    h >> (<span class="hljs-number">2</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>xd0
    <span class="hljs-selector-tag">i</span> >> (<span class="hljs-number">3</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > <span class="hljs-number">0</span>x10
    c >> (<span class="hljs-number">4</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > F9FC5162DC8B609B6F891BC88648A49A
    d >> (<span class="hljs-number">4</span>, <span class="hljs-number">63</span>, <span class="hljs-number">0</span>) > null
</code></pre>
<p>were suggesting that the protocol was relying on some kind of encryption to communicate over a secure channel, using a shared encryption key exchanged at the time of pairing.</p>
<blockquote>
<p>I needed more, so I thought of using a decompiler.</p>
</blockquote>
<p>I tried some like <a href="https://bitbucket.org/mstrobel/procyon/">Procyon</a>, <a href="http://www.benf.org/other/cfr/">CFR</a> to get as much information as possible. With the help of a great tool called <a href="https://github.com/Konloch/bytecode-viewer">BytecodeViewer</a>, I stared to follow the code paths, drawing diagrams, understand the app flow and structures…</p>
<p>Eventually I reproduced all the steps needed to pair and setup an encrypted communication channel with the UP2 and send the vibration command I needed :)</p>
<iframe class="line-11-m line-17-d" src="//www.youtube.com/embed/uwsyjyM5GJU" frameborder="0" allowfullscreen></iframe>
<blockquote>
<p>Victory! … almost.</p>
</blockquote>
<p>As I came back on my initial goal of integrating UP2 support into UpNotifications, I realized that it would be very hard to achieve any kind of <em>user friendly</em> experience.</p>
<p>The first problem comes from the fact that the encryption key is kept secret into the original UP application, and the only way to retrieve such key is to have a <em>rooted</em> phone.</p>
<p>The second crucial problem is that, even if it was possible to get the encryption key easily, UP2 supports only one bluetooth connection at time.
This means that an <em>UpNotifications for UP2</em> would not work while the band is connected to the original UP application.</p>
<p>And since there’s no way (without root permission) to control when the UP app runs or communicates with the band, <strong>UpNotifications for UP2 would be incompatible with the official UP app</strong>.</p>
<blockquote>
<p>I still haven’t decided whether write an <em>UpNotifications for UP2</em> or not…</p>
</blockquote>
<p><del>So, for the time being, I’m not releasing the source code of the “test” app I wrote</del> (moreover, currently the code is quite a mess).</p>
<p>Also, I want to be sure of the legal consequences of releasing any protocol specs…</p>
<p>Unlike the old UP24, Jawbone is using this protocol on devices like UP4 for <a href="https://jawbone.com/blog/introducing-up4/">contactless payments</a>, so this time they could be much more interested in keeping the protocol as much secret as possible to avoid security issues.</p>
<p><em>— 19/09/2015</em></p></article><footer class="footer"><div class="footer-contacts"><a href="https://twitter.com/thecybercase" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://github.com/cybercase" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://it.linkedin.com/pub/stefano-brilli/21/650/953" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a href="mailto:stefano@brilli.me"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></div><div>© Stefano Brilli. All Rights Reserved.</div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"up2_reverse_engineering","title":"UP2 Reverse Engineering","description":"Jawbone UP2 vibration hack","date":"2015-09-19T00:00:01.000Z","coverImage":"/images/up2_band.png","coverTitle":"UP2 Reverse Engineering","coverCaption":"Charging my new UP2","coverDark":true,"content":"\u003cp\u003e\u003cstrong\u003eJuly 2018 UPDATE:\u003c/strong\u003e I’ve released the source code of this project on github.\u003c/br\u003e\nFind out more here: \u003ca href=\"https://github.com/cybercase/up2_hacking\"\u003ehttps://github.com/cybercase/up2_hacking\u003c/a\u003e\u003c/p\u003e\n\u003ch3\u003eHaving fun with Jawbone UP2\u003c/h3\u003e\n\u003cp\u003eA few months after releasing \u003ca href=\"../up24_notifications\"\u003eUpNotifications for UP24\u003c/a\u003e\nI received a lot of emails asking to add support for the new \u003cstrong\u003eJawbone UP2\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eAs soon as Jawbone made the UP2 available outside the US I placed my order,\nand after receiving the new band, without thinking too much I started tuning the UpNotifications\nsource code to include the UP2 among supported devices just to see if the same hack used for UP24 was working also on this band…\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUnfortunately, it was not.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI didn’t give up, and following the same steps of my own \u003ca href=\"../up24_reverse_engineering\"\u003eUP24 Hacking\u003c/a\u003e blogpost,\nI opened Android Studio, turned on the debugger, started intercepting calls to the android BLE API and see what has changed with respect to UP24…\u003c/p\u003e\n\u003cp\u003eThe bluetooth packets I was reading were completely different from the UP24 packets,\nso I thought that maybe it was just a matter of replacing the old UP24’s pairing command with the new UP2’s one. And so I did.\u003c/p\u003e\n\u003cp\u003eI soon found out that the same trick of \u003cem\u003esending a pairing command to make the band vibrate\u003c/em\u003e was not working because\nthe new UP2 knows if it has been already paired with a phone, and in that case it does not vibrate on pairing.\u003c/p\u003e\n\u003cp\u003eWhile the UP24 \u003cstrong\u003eallowed anyone\u003c/strong\u003e to make vibrate your band without your permission just by sending a pairing command,\nwith the UP2 \u003cstrong\u003eJawbone has fixed this issue\u003c/strong\u003e. Though this is a good news for all UP2 owners, this meant that I had to\nfind another way to trigger the vibration.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI needed to go deeper.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI struggled to understand how the communication protocol has changed, and see if I could find another command to exploit.\nBut just looking at the stream of bluetooth packets wasn’t enough…\u003c/p\u003e\n\u003cp\u003eso I though of disassembling the app and inspecting its \u003ccode\u003e.smali\u003c/code\u003e source code using \u003ca href=\"http://ibotpeaches.github.io/Apktool/\"\u003eapktool\u003c/a\u003e\nto search for anything that could be useful.\u003c/p\u003e\n\u003cp\u003eAfter going through the sources for a while I noticed a \u003ccode\u003elog\u003c/code\u003e method used all over the app, probably for debugging purposes,\nthat was disabled just by a simple flag check.\u003c/p\u003e\n\u003cp\u003eIn a file called \u003ccode\u003eJBLog.smali\u003c/code\u003e, I changed the following lines\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-diff\"\u003e\u003cspan class=\"hljs-deletion\"\u003e-    if-nez v0, :cond_0\u003c/span\u003e\n\u003cspan class=\"hljs-addition\"\u003e+    if-eqz v0, :cond_0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ethen reassembled the app and installed into my phone.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI started getting a lot of debug information placed there right from UP developers :)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI immediately found out that the communication protocol was much more sophisticated than the one used for UP24.\u003c/p\u003e\n\u003cp\u003eLog messages like this\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scss\"\u003e\u003cspan class=\"hljs-number\"\u003e8257\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e8288\u003c/span\u003e/com\u003cspan class=\"hljs-selector-class\"\u003e.jawbone\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.upopen\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eI\u003c/span\u003e/UPOPEN﹕ StreamService \u003e\u003e\u003e writeOutputStream \u003e KeyExchangeRequest \u003e\n    f \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003ex03\n    g \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003ex00\n    h \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003exd3\n    \u003cspan class=\"hljs-selector-tag\"\u003ei\u003c/span\u003e \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003ex10\n    d \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003eFA19B1353FC584CAEF3D4214C74A365\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e8257-7505/com.jawbone.upopen D/SecuredStream﹕ generateSeed \u003e 271372323671BDEE846276EF48B53F75\n8257-7505/com.jawbone.upopen D/SecuredStream﹕ 8200CD05803A090000 xor D4CB772B8B9D389527 = 56CBBA2E0BA7319527\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scss\"\u003e\u003cspan class=\"hljs-number\"\u003e8257\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e7505\u003c/span\u003e/com\u003cspan class=\"hljs-selector-class\"\u003e.jawbone\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.upopen\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eI\u003c/span\u003e/UPOPEN﹕ StreamService \u003e\u003e\u003e writeOutputStream \u003e SecureChannelRequest \u003e\n    f \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003ex06\n    g \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003ex00\n    h \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003exd0\n    \u003cspan class=\"hljs-selector-tag\"\u003ei\u003c/span\u003e \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003ex10\n    c \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e F9FC5162DC8B609B6F891BC88648A49A\n    d \u003e\u003e (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003e null\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewere suggesting that the protocol was relying on some kind of encryption to communicate over a secure channel, using a shared encryption key exchanged at the time of pairing.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI needed more, so I thought of using a decompiler.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI tried some like \u003ca href=\"https://bitbucket.org/mstrobel/procyon/\"\u003eProcyon\u003c/a\u003e, \u003ca href=\"http://www.benf.org/other/cfr/\"\u003eCFR\u003c/a\u003e to get as much information as possible. With the help of a great tool called \u003ca href=\"https://github.com/Konloch/bytecode-viewer\"\u003eBytecodeViewer\u003c/a\u003e, I stared to follow the code paths, drawing diagrams, understand the app flow and structures…\u003c/p\u003e\n\u003cp\u003eEventually I reproduced all the steps needed to pair and setup an encrypted communication channel with the UP2 and send the vibration command I needed :)\u003c/p\u003e\n\u003ciframe class=\"line-11-m line-17-d\" src=\"//www.youtube.com/embed/uwsyjyM5GJU\" frameborder=\"0\" allowfullscreen\u003e\u003c/iframe\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVictory! … almost.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAs I came back on my initial goal of integrating UP2 support into UpNotifications, I realized that it would be very hard to achieve any kind of \u003cem\u003euser friendly\u003c/em\u003e experience.\u003c/p\u003e\n\u003cp\u003eThe first problem comes from the fact that the encryption key is kept secret into the original UP application, and the only way to retrieve such key is to have a \u003cem\u003erooted\u003c/em\u003e phone.\u003c/p\u003e\n\u003cp\u003eThe second crucial problem is that, even if it was possible to get the encryption key easily, UP2 supports only one bluetooth connection at time.\nThis means that an \u003cem\u003eUpNotifications for UP2\u003c/em\u003e would not work while the band is connected to the original UP application.\u003c/p\u003e\n\u003cp\u003eAnd since there’s no way (without root permission) to control when the UP app runs or communicates with the band, \u003cstrong\u003eUpNotifications for UP2 would be incompatible with the official UP app\u003c/strong\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI still haven’t decided whether write an \u003cem\u003eUpNotifications for UP2\u003c/em\u003e or not…\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cdel\u003eSo, for the time being, I’m not releasing the source code of the “test” app I wrote\u003c/del\u003e (moreover, currently the code is quite a mess).\u003c/p\u003e\n\u003cp\u003eAlso, I want to be sure of the legal consequences of releasing any protocol specs…\u003c/p\u003e\n\u003cp\u003eUnlike the old UP24, Jawbone is using this protocol on devices like UP4 for \u003ca href=\"https://jawbone.com/blog/introducing-up4/\"\u003econtactless payments\u003c/a\u003e, so this time they could be much more interested in keeping the protocol as much secret as possible to avoid security issues.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003e— 19/09/2015\u003c/em\u003e\u003c/p\u003e"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"up2_reverse_engineering"},"buildId":"Pu0FF9jwbI92rgPmGqXW4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>